<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BugBot</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #ffffff;
      font-family: 'Orbitron', sans-serif;
      padding: 2rem;
      min-height: 100vh;
    }

    .glass-box {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 2rem;
      margin-top: 2rem;
      transition: all 0.3s ease-in-out;
    }

    .glass-box:hover {
      transform: scale(1.01);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.2);
    }

    h1, h3, h4 {
      color: #00ffe7;
    }

    .form-label {
      color: #a0d8ef;
    }

    .btn-primary {
      background-color: #00ffc3;
      border: none;
      color: #000;
      font-weight: bold;
      transition: 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #00ffe7;
      box-shadow: 0 0 10px #00ffe7, 0 0 20px #00ffe7;
      transform: scale(1.05);
    }

    .btn-secondary {
      background-color: #4b6cb7;
      border: none;
    }

    pre {
      background: rgba(255, 255, 255, 0.05);
      border-left: 4px solid #00ffe7;
      padding: 1rem;
      color: #d0f0ff;
      border-radius: 10px;
      font-size: 0.95rem;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .list-group-item {
      background-color: rgba(255, 255, 255, 0.05);
      border: none;
      color: #ffffff;
    }

    .error-title {
      color: #ff6b6b;
    }

    a {
      color: #00ffe7;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    input[type="file"] {
      background-color: #1e2b38;
      border: 1px solid #00ffe7;
      color: #ffffff;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1 class="mb-4">ðŸ¤– BugBot</h1>

    <div class="glass-box">
      <form action="/" method="POST" enctype="multipart/form-data" class="mb-4">
        <div class="mb-3">
          <label for="code" class="form-label">Upload Python File</label>
          <input class="form-control" type="file" name="code" id="code" accept=".py" required>
        </div>
        <button type="submit" class="btn btn-primary">Analyze</button>
      </form>

      <a href="{{ url_for('history') }}" class="btn btn-secondary mt-3">View History</a>
    </div>

    {% if code %}
    <div class="glass-box">
      <h4>Uploaded Code:</h4>
      <pre>{{ code }}</pre>
    </div>
    {% endif %}

    {% if results %}
    <div class="glass-box">
      <h3 class="mb-3">Where have you gone wrong?</h3>

      <ul class="list-group mb-4">
        {% for result in results %}
        <li class="list-group-item">
          <span class="error-title">[{{ result.type }}]</span> - {{ result.message }}<br>
          <strong>Lines:</strong> {{ result.lines | join(', ') }}
        </li>
        {% endfor %}
      </ul>

      <div class="explanation-section">
        <h4>Follow this to improve your coding skills</h4>
        <ul class="list-group">
          {% for result in results %}
          <li class="list-group-item">
            <strong>{{ result.type }}:</strong><br>
            {{ result.explanation }}
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
    {% endif %}

  </div>

</body>
</html>
